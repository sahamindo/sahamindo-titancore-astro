---
import Layout from '../../layouts/Layout.astro';
import NewsList from './NewsList.astro';
import InnerHero from '../sections/InnerHero.astro';
import Button from '../ui/Button.astro';
import { ChevronLeft, ChevronRight } from 'lucide-astro';

import newsHeroImage from '@assets/images/blog-hero-2.jpg';

interface Props {
    articles: any[];
    currentPage: number;
    totalPages: number;
    baseUrl: string;  // e.g., '/berita' or '/sektor/perbankan'
    title: string;
    subtitle: string;
    currentSector?: string;
    seoTitle?: string;
    seoDescription?: string;
}

const { 
    articles: paginatedArticles, 
    currentPage, 
    totalPages, 
    baseUrl,
    title,
    subtitle,
    currentSector,
    seoTitle = "Berita Pasar Saham Indonesia",
    seoDescription = "Berita terkini dan analisis mendalam pasar saham Indonesia - sektor perbankan, IPO, barang konsumen, dan infrastruktur."
} = Astro.props;

// Generate pagination URLs
const nextPage = currentPage < totalPages ? `${baseUrl}/${currentPage + 1}` : null;
const prevPage = currentPage > 1 
    ? currentPage - 1 === 1 
        ? baseUrl
        : `${baseUrl}/${currentPage - 1}`
    : null;

const heroContent = {
    title: title,
    description: subtitle,
    backgroundImage: newsHeroImage,
    overlayOpacity: 0.2
}
---
<Layout title={seoTitle} description={seoDescription}>
    <main>
        <InnerHero content={heroContent}/>
        <NewsList articles={paginatedArticles} currentSector={currentSector} />

        {totalPages > 1 && (
            <nav class="pagination-nav" aria-label="News pagination" data-aos="fade-in">
                <div class="container mx-auto px-4 py-12">
                    <div class="flex items-center justify-center gap-6">
                        {prevPage && (
                            <Button href={prevPage} variant="primary" class="flex items-center gap-2">
                                <ChevronLeft size={20} />
                                Sebelumnya
                            </Button>
                        )}
                        
                        <div class="flex items-center gap-2">
                            <span class="text-sm text-gray-600 mr-2">Halaman {currentPage} dari {totalPages}</span>
                        </div>

                        {nextPage && (
                            <Button href={nextPage} variant="primary" class="flex items-center gap-2">
                                Selanjutnya
                                <ChevronRight size={20} />
                            </Button>
                        )}
                    </div>
                    
                    <div class="text-center mt-4 text-sm text-gray-600">
                        Halaman {currentPage} dari {totalPages}
                    </div>
                </div>
            </nav>
        )}
    </main>
</Layout>